{"version":3,"file":"static/webpack/static/development/pages/blog.js.333494faa56f4262dda4.hot-update.js","sources":["webpack:///./pages/blog.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { withRouter } from 'next/router'\nimport { createClient }  from 'contentful';\nimport Head from 'next/head';\nimport Layout from '../components/layout/main';\nimport { CONTENTFUL_SPACE_ID, CONTENTFUL_ACCESS_TOKEN } from '../defaults/ContentfulKeys';\nimport BlogPost from '../components/posts/BlogPost';\nimport LANGUAGES, { DEFAULT_LANGUAGE } from '../defaults/Languages';\nimport * as Language from '../defaults/Language';\n\nconst Blog = ({ router }) => {\n\n  const [initialized, setInitialized] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [stateLocale, setStateLocale] = useState(router.query.locale || DEFAULT_LANGUAGE);\n\n  let setLocaleFn;\n\n  useEffect(() => {\n    if(!router.query.locale) {\n\n      const locale = (\n        LANGUAGES.includes(window.navigator.language)\n        ? window.navigator.language\n        : DEFAULT_LANGUAGE\n      );\n\n      setLocaleFn(locale);\n      setStateLocale(locale);\n    }\n    setInitialized(true);\n  }, []);\n\n  useEffect(() => {\n    if(initialized) {\n      const client = createClient({\n        space: CONTENTFUL_SPACE_ID,\n        accessToken: CONTENTFUL_ACCESS_TOKEN\n      });\n\n      client.getEntries({\n        content_type: 'blogPost',\n        order: '-sys.createdAt',\n        locale: stateLocale,\n      })\n      .then(function(response) {\n        setPosts(response.items);\n      });\n\n      document.documentElement.setAttribute(\n        'lang',\n        stateLocale\n      );\n    }\n  }, [initialized, stateLocale]);\n\n\n  return (\n    <Language.Consumer>\n      {({ translation, setLocale }) => {\n\n        setLocaleFn = setLocale;\n\n        return (\n          <Layout>\n            <Head>\n              <title>Murillo de Morais - Blog</title>\n              <meta name=\"description\" content=\"Hi, I'm Murillo, a fullstack programmer with a lot of experiences in web development. In this personal page I share some knowledges and technology news.\" />\n              <meta name=\"og:description\" content=\"Hi, I'm Murillo, a fullstack programmer with a lot of experiences in web development. In this personal page I share some knowledges and technology news.\" />\n            </Head>\n            <h1>Blog</h1>\n            <div className=\"blog__posts\">\n              {\n                posts.map((post, i) =>\n                  <BlogPost\n                    key={i}\n                    index={i}\n                    post={post} />\n                )\n              }\n            </div>\n            <style global jsx>{`\n\n              body {\n                background: #f8f8f8;\n              }\n\n              h1 {\n                margin: 20px 0;\n                font-size: 60px;\n                text-align: center;\n                line-height: 115px;\n                background-image: linear-gradient(to bottom,#4CB8C4,#3CD3AD);\n                color: transparent;\n                font-family: stolzl,sans-serif;\n                font-weight: 700;\n                font-style: normal;\n                -webkit-background-clip: text;\n              }\n\n              .blog__posts {\n                width: 900px;\n                margin: auto auto 70px auto;\n                display: flex;\n                flex-direction: column;\n                align-items: flex-start;\n              }\n\n              @media screen and (max-width: 970px) {\n\n                .blog__posts {\n                  width: 100%;\n                }\n\n              }\n\n            `}</style>\n          </Layout>\n        )}\n      }\n    </Language.Consumer>\n  );\n};\n\nexport default withRouter(Blog);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAKA;AAEA;AACA;AAEA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAEA;AAIA;AACA;AAGA;AAEA;AAAA;AAEA;AAEA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AAHA;AADA;AATA;AAAA;AAsDA;AAIA;AACA;AACA;;;;A","sourceRoot":""}